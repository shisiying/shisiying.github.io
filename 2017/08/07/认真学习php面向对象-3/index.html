<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="努力，奋斗！"><title>php学习系列3 | 其斤.匕禾页</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">php学习系列3</h1><a id="logo" href="/.">其斤.匕禾页</a><p class="description">永远相信美好的事情即将发生</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="https://www.xhzyxed.cn/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">php学习系列3</h1><div class="post-meta">Aug 7, 2017<span> | </span><span class="category"><a href="/categories/php/">php</a></span></div><div class="post-content"><a id="more"></a>
<h1 id="认真学习php面向对象-3"><a href="#认真学习php面向对象-3" class="headerlink" title="认真学习php面向对象-3"></a>认真学习php面向对象-3</h1><h3 id="前言"><a href="#前言" class="headerlink" title=" 前言 "></a><strong> 前言 </strong></h3><p>准备写一个认真学习php面向对象的系列，使用php来做网页，没有深入了解php的话，可能三板斧就够了，并不需要有多高深！如有错误，欢迎各位不吝赐教！进度安排的话，我学到哪里，就更新到哪里了！形式的话就采用一个需求小案例，然后实现，并附上自己的总结,<a href="https://github.com/shisiying/phpOrinentedObject/tree/master" target="_blank" rel="noopener">文章源码</a></p>
<h3 id="所用到的环境"><a href="#所用到的环境" class="headerlink" title=" 所用到的环境 "></a><strong> 所用到的环境 </strong></h3><p>系统:ubuntu16.04<br>编辑器:phpstorm2017<br>php7</p>
<h3 id="需求-：1-使用自定义模板创建入口文件"><a href="#需求-：1-使用自定义模板创建入口文件" class="headerlink" title="需求 ：1)使用自定义模板创建入口文件"></a><strong>需求 ：1)使用自定义模板创建入口文件</strong></h3><h4 id="解决-ob-start以及get-object-vars和extract的使用"><a href="#解决-ob-start以及get-object-vars和extract的使用" class="headerlink" title="解决 : ob_start以及get_object_vars和extract的使用"></a><strong>解决 : ob_start以及get_object_vars和extract的使用</strong></h4><ol>
<li><p>ob_start</p>
<blockquote>
<p>此函数将打开输出缓冲。当输出缓冲激活后，脚本将不会输出内容（除http标头外），相反需要输出的内容被存储在内部缓冲区中</p>
</blockquote>
<p>我们可以使用此函数加载自定义的模板文件，但并没有输出到屏幕中，而是用变量获取数据，并将数据写入到创建的入口文件当中</p>
</li>
<li><p>get_object_vars</p>
<blockquote>
<p>返回由对象属性组成的关联数组<br>可以获取该对象的属性值，并创建用户输入的参数文件目录以及写入用户的数据</p>
</blockquote>
</li>
<li><p>extract</p>
<blockquote>
<p>从数组中将变量导入到当前的符号表,可以将数组直接转换成变量（$key）=值（$value）</p>
</blockquote>
</li>
</ol>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现 : "></a><strong>实现 : </strong></h4><h4 id="创建自定义模板文件（template文件下创建index-tpl）"><a href="#创建自定义模板文件（template文件下创建index-tpl）" class="headerlink" title="创建自定义模板文件（template文件下创建index.tpl）"></a><strong>创建自定义模板文件（template文件下创建index.tpl）</strong></h4><h4 id="index-tpl"><a href="#index-tpl" class="headerlink" title="index.tpl"></a><strong>index.tpl</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php <span class="built_in">echo</span> <span class="string">'&lt;?php'</span> ?&gt;</span><br><span class="line">	/**</span><br><span class="line">	 * project name &lt;?php <span class="built_in">echo</span> <span class="variable">$prj_name</span>?&gt;</span><br><span class="line">	 * user &lt;?php <span class="built_in">echo</span> <span class="variable">$author</span>?&gt;</span><br><span class="line">	 * date &lt;?php <span class="built_in">echo</span> date(<span class="string">'Y-m-d'</span>)?&gt;</span><br><span class="line">	 */</span><br></pre></td></tr></table></figure>
<h4 id="写入模板文件所需要的变量值"><a href="#写入模板文件所需要的变量值" class="headerlink" title="写入模板文件所需要的变量值"></a><strong>写入模板文件所需要的变量值</strong></h4><h4 id="god-class-hp"><a href="#god-class-hp" class="headerlink" title="god_class.hp"></a><strong>god_class.hp</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">static <span class="keyword">function</span> <span class="function"><span class="title">start</span></span>() &#123;</span><br><span class="line">          <span class="variable">$config</span>=loadconfig();</span><br><span class="line">          <span class="variable">$ff</span>=new god_frame(<span class="variable">$config</span>-&gt;prj_name);</span><br><span class="line">          <span class="variable">$ff</span>-&gt;prj_name=<span class="variable">$config</span>-&gt;prj_name;</span><br><span class="line">          <span class="variable">$ff</span>-&gt;author=<span class="variable">$config</span>-&gt;author;</span><br><span class="line">          <span class="variable">$ff</span>-&gt;run();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<h4 id="在创建文件目录类对输入的参数处理以及生成模板对应自定义文件"><a href="#在创建文件目录类对输入的参数处理以及生成模板对应自定义文件" class="headerlink" title="在创建文件目录类对输入的参数处理以及生成模板对应自定义文件"></a><strong>在创建文件目录类对输入的参数处理以及生成模板对应自定义文件</strong></h4><h4 id="god-frame-hp"><a href="#god-frame-hp" class="headerlink" title="god_frame.hp"></a><strong>god_frame.hp</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">run</span></span>() &#123;</span><br><span class="line">      !file_exists(<span class="variable">$this</span>-&gt;project_folder) &amp;&amp; mkdir(<span class="variable">$this</span>-&gt;project_folder);</span><br><span class="line">      !file_exists(<span class="variable">$this</span>-&gt;project_main) &amp;&amp; file_put_contents(<span class="variable">$this</span>-&gt;project_main,<span class="string">''</span>);</span><br><span class="line">	</span><br><span class="line">      extract(get_object_vars(<span class="variable">$this</span>));</span><br><span class="line">      ob_start();</span><br><span class="line">      include (dirname(__FILE__).<span class="string">'/template/index.tpl'</span>);</span><br><span class="line">      <span class="variable">$cnt</span>=ob_get_contents();</span><br><span class="line">      ob_end_clean();</span><br><span class="line">      file_put_contents(<span class="variable">$this</span>-&gt;project_main,<span class="variable">$cnt</span>);</span><br><span class="line">	</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="效果"><a href="#效果" class="headerlink" title="效果 : "></a><strong>效果 : </strong></h4><p><img src="http://img.blog.csdn.net/20170805152528257?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="需求-：2-使用php内置服务器部署网站，供开发测试使用"><a href="#需求-：2-使用php内置服务器部署网站，供开发测试使用" class="headerlink" title="需求 ：2)使用php内置服务器部署网站，供开发测试使用"></a><strong>需求 ：2)使用php内置服务器部署网站，供开发测试使用</strong></h3><h4 id="解决-system和php命令行启动内置服务器命令"><a href="#解决-system和php命令行启动内置服务器命令" class="headerlink" title="解决 : system和php命令行启动内置服务器命令"></a><strong>解决 : system和php命令行启动内置服务器命令</strong></h4><ol>
<li><p>system</p>
<blockquote>
<p>同 C 版本的 system() 函数一样， 本函数执行 command 参数所指定的命令， 并且输出执行结果。<br>启动php内置服务器</p>
</blockquote>
</li>
<li><p>php启动内置服务器方法</p>
<blockquote>
<p>php -S “可以随意设置访问的地址” -t 项目的目录地址<br>如:php -S localhost:8080 -t /home/shisiying/code/phpOrinentedObject/app</p>
</blockquote>
</li>
</ol>
<h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现 : "></a><strong>实现 : </strong></h4><h4 id="使用system函数进行执行"><a href="#使用system函数进行执行" class="headerlink" title="使用system函数进行执行"></a><strong>使用system函数进行执行</strong></h4><h4 id="god-frame-hp-1"><a href="#god-frame-hp-1" class="headerlink" title="god_frame.hp"></a><strong>god_frame.hp</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">run</span></span>() &#123;</span><br><span class="line">       !file_exists(<span class="variable">$this</span>-&gt;project_folder) &amp;&amp; mkdir(<span class="variable">$this</span>-&gt;project_folder);</span><br><span class="line">       !file_exists(<span class="variable">$this</span>-&gt;project_main) &amp;&amp; file_put_contents(<span class="variable">$this</span>-&gt;project_main,<span class="string">''</span>);</span><br><span class="line">		</span><br><span class="line">       extract(get_object_vars(<span class="variable">$this</span>));</span><br><span class="line">       ob_start();</span><br><span class="line">       include (dirname(__FILE__).<span class="string">'/template/index.tpl'</span>);</span><br><span class="line">       <span class="variable">$cnt</span>=ob_get_contents();</span><br><span class="line">       ob_end_clean();</span><br><span class="line">       file_put_contents(<span class="variable">$this</span>-&gt;project_main,<span class="variable">$cnt</span>);</span><br><span class="line">	</span><br><span class="line">       <span class="built_in">echo</span> <span class="string">"the server is running!"</span>;</span><br><span class="line">       system(<span class="string">"php -S localhost:8080 -t /home/shisiying/code/phpOrinentedObject/app"</span>);</span><br><span class="line">		</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="效果-1"><a href="#效果-1" class="headerlink" title="效果 : "></a><strong>效果 : </strong></h4><p><img src="http://img.blog.csdn.net/20170805154012359?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>其中it works在生成的后续添加的，方便观察效果<br><img src="http://img.blog.csdn.net/20170805154021808?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="需求-：3-对只写变量的文件模拟编译"><a href="#需求-：3-对只写变量的文件模拟编译" class="headerlink" title="需求 ：3)对只写变量的文件模拟编译"></a><strong>需求 ：3)对只写变量的文件模拟编译</strong></h3><h4 id="解决-scandir和get-defined-vars-和var-export的使用"><a href="#解决-scandir和get-defined-vars-和var-export的使用" class="headerlink" title="解决 : scandir和get_defined_vars()和var_export的使用"></a><strong>解决 : scandir和get_defined_vars()和var_export的使用</strong></h4><ol>
<li><p>scandir</p>
<blockquote>
<p>列出指定路径中的文件和目录</p>
</blockquote>
</li>
<li><p>get_defined_vars</p>
<blockquote>
<p>返回由所有已定义变量所组成的数组</p>
</blockquote>
</li>
<li><p>var_export</p>
<blockquote>
<p>输出或返回一个变量的字符串表示,函数的第二个参数设置为 TRUE，从而返回变量的表示。</p>
</blockquote>
</li>
</ol>
<h4 id="实现-2"><a href="#实现-2" class="headerlink" title="实现 : "></a><strong>实现 : </strong></h4><h4 id="创建一个文件"><a href="#创建一个文件" class="headerlink" title="创建一个文件"></a><strong>创建一个文件</strong></h4><p><img src="http://img.blog.csdn.net/20170806233051569?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h4 id=""><a href="#" class="headerlink" title="**"></a><em>**</em></h4><h4 id="god-frame-php"><a href="#god-frame-php" class="headerlink" title="god_frame.php"></a><strong>god_frame.php</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">compile</span></span>() &#123;</span><br><span class="line">       <span class="variable">$_files</span>=scandir(<span class="variable">$this</span>-&gt;project_folder.<span class="string">'/code'</span>);</span><br><span class="line">       foreach (<span class="variable">$_files</span> as <span class="variable">$_file</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (preg_match(<span class="string">"/\w+\.var\.php$/i"</span>,<span class="variable">$_file</span>)) &#123;</span><br><span class="line">               require (<span class="variable">$this</span>-&gt;project_folder.<span class="string">'/code/'</span>.<span class="variable">$_file</span>);</span><br><span class="line">               <span class="built_in">unset</span>(<span class="variable">$_file</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="built_in">unset</span>(<span class="variable">$_files</span>);</span><br><span class="line">       <span class="variable">$result</span>=<span class="string">'&lt;?php'</span>.PHP_EOL</span><br><span class="line">               .<span class="string">'extract('</span>.var_export(get_defined_vars(),1).<span class="string">');'</span>;</span><br><span class="line">       file_put_contents(<span class="variable">$this</span>-&gt;project_folder.<span class="string">'/vars'</span>,<span class="variable">$result</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="god-class-php"><a href="#god-class-php" class="headerlink" title="god_class.php"></a><strong>god_class.php</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">//模拟编译</span><br><span class="line">    static <span class="keyword">function</span> <span class="function"><span class="title">compile</span></span>() &#123;</span><br><span class="line">        <span class="variable">$config</span>=loadconfig();</span><br><span class="line">        <span class="variable">$gf</span>=new god_frame(<span class="variable">$config</span>-&gt;prj_name);</span><br><span class="line">        <span class="variable">$gf</span>-&gt;compile();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>####<strong>效果 : </strong><br><img src="http://img.blog.csdn.net/20170807094605400?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="需求-：4-对只写函数的文件模拟编译"><a href="#需求-：4-对只写函数的文件模拟编译" class="headerlink" title="需求 ：4)对只写函数的文件模拟编译"></a><strong>需求 ：4)对只写函数的文件模拟编译</strong></h3><h4 id="解决-scandir和get-defined-function-和ReflectionFunction的使用"><a href="#解决-scandir和get-defined-function-和ReflectionFunction的使用" class="headerlink" title="解决 : scandir和get_defined_function()和ReflectionFunction的使用"></a><strong>解决 : scandir和get_defined_function()和ReflectionFunction的使用</strong></h4><ol>
<li><p>scandir</p>
<blockquote>
<p>列出指定路径中的文件和目录</p>
</blockquote>
</li>
<li><p>get_defined_vars</p>
<blockquote>
<p>返回由所有已定义变量所组成的数组</p>
</blockquote>
</li>
<li><p>var_export</p>
<blockquote>
<p>输出或返回一个变量的字符串表示,函数的第二个参数设置为 TRUE，从而返回变量的表示。</p>
</blockquote>
</li>
<li><p>get_defined_function()</p>
<blockquote>
<p>返回所有已定义函数的数组</p>
</blockquote>
</li>
<li><p>ReflectionFunction</p>
<blockquote>
<p>报告了一个函数的有关信息。使用方法如下</p>
</blockquote>
</li>
</ol>
<ol start="6">
<li>array_slice<blockquote>
<p>从数组中取出一段,数组的截取函数</p>
</blockquote>
</li>
<li>implode<blockquote>
<p>将一个一维数组的值转化为字符串</p>
</blockquote>
</li>
<li>unset<blockquote>
<p>释放给定的变量</p>
</blockquote>
</li>
</ol>
<h4 id="实现-3"><a href="#实现-3" class="headerlink" title="实现 : "></a><strong>实现 : </strong></h4><h4 id="创建一个函数文件"><a href="#创建一个函数文件" class="headerlink" title="创建一个函数文件"></a><strong>创建一个函数文件</strong></h4><p><img src="http://img.blog.csdn.net/20170807103511483?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h4 id="god-frame-php-1"><a href="#god-frame-php-1" class="headerlink" title="god_frame.php"></a><strong>god_frame.php</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">compile</span></span>() &#123;</span><br><span class="line">      <span class="variable">$_files</span>=scandir(<span class="variable">$this</span>-&gt;project_folder.<span class="string">'/code'</span>);</span><br><span class="line">      foreach (<span class="variable">$_files</span> as <span class="variable">$_file</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (preg_match(<span class="string">"/\w+\.(var|func)\.php$/i"</span>,<span class="variable">$_file</span>)) &#123;</span><br><span class="line">              require (<span class="variable">$this</span>-&gt;project_folder.<span class="string">'/code/'</span>.<span class="variable">$_file</span>);</span><br><span class="line">              <span class="built_in">unset</span>(<span class="variable">$_file</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">unset</span>(<span class="variable">$_files</span>);</span><br><span class="line">      <span class="variable">$result</span>=<span class="string">'&lt;?php'</span>.PHP_EOL</span><br><span class="line">              .<span class="string">'extract('</span>.var_export(get_defined_vars(),1).<span class="string">');'</span>;</span><br><span class="line">      file_put_contents(<span class="variable">$this</span>-&gt;project_folder.<span class="string">'/vars'</span>,<span class="variable">$result</span>);</span><br><span class="line"></span><br><span class="line">      <span class="variable">$funs</span>=get_defined_functions();</span><br><span class="line">      foreach (<span class="variable">$funs</span>[<span class="string">'user'</span>] as <span class="variable">$fun</span>) &#123;</span><br><span class="line">          <span class="variable">$f</span>=new \ReflectionFunction(<span class="variable">$fun</span>);</span><br><span class="line">          <span class="variable">$start</span>=<span class="variable">$f</span>-&gt;getStartLine();</span><br><span class="line">          <span class="variable">$end</span>=<span class="variable">$f</span>-&gt;getEndLine();</span><br><span class="line">          <span class="variable">$fileList</span>=file(<span class="variable">$f</span>-&gt;getFileName());</span><br><span class="line">          <span class="variable">$re</span> = <span class="string">'&lt;?php'</span>.PHP_EOL</span><br><span class="line">                  .implode(array_slice(<span class="variable">$fileList</span>,<span class="variable">$start</span>-1,<span class="variable">$end</span>-<span class="variable">$start</span>+1));</span><br><span class="line">          file_put_contents(<span class="variable">$this</span>-&gt;project_folder.<span class="string">'/func'</span>,<span class="variable">$re</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="效果-2"><a href="#效果-2" class="headerlink" title="效果 : "></a><strong>效果 : </strong></h4><p><img src="http://img.blog.csdn.net/20170807103702632?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="需求-：5-模拟简单的mvc模式，接收浏览器访问的mv并进行路由简单处理"><a href="#需求-：5-模拟简单的mvc模式，接收浏览器访问的mv并进行路由简单处理" class="headerlink" title="需求 ：5)模拟简单的mvc模式，接收浏览器访问的mv并进行路由简单处理"></a><strong>需求 ：5)模拟简单的mvc模式，接收浏览器访问的mv并进行路由简单处理</strong></h3><h4 id="解决-SERVER-‘PATH-INFO’-和explode的使用"><a href="#解决-SERVER-‘PATH-INFO’-和explode的使用" class="headerlink" title="解决 : $_SERVER[‘PATH_INFO’]和explode的使用"></a><strong>解决 : $_SERVER[‘PATH_INFO’]和explode的使用</strong></h4><h4 id="实现-4"><a href="#实现-4" class="headerlink" title="实现 : "></a><strong>实现 : </strong></h4><h4 id="创建一个class文件"><a href="#创建一个class文件" class="headerlink" title="创建一个class文件"></a><strong>创建一个class文件</strong></h4><p><img src="http://img.blog.csdn.net/20170807115523782?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h4 id="index-php"><a href="#index-php" class="headerlink" title="index.php"></a><strong>index.php</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable">$pi</span>=<span class="variable">$_SERVER</span>[<span class="string">'PATH_INFO'</span>];</span><br><span class="line"><span class="variable">$controller</span>=explode(<span class="string">'/'</span>,<span class="variable">$pi</span>)[1];</span><br><span class="line"><span class="variable">$method</span>=explode(<span class="string">'/'</span>,<span class="variable">$pi</span>)[2];</span><br><span class="line">require (getcwd().<span class="string">'/code/'</span>.<span class="variable">$controller</span>.<span class="string">".class.php"</span>);</span><br><span class="line"><span class="variable">$get_class</span>=new <span class="variable">$controller</span>();</span><br><span class="line"><span class="variable">$get_class</span>-&gt;<span class="variable">$method</span>();</span><br></pre></td></tr></table></figure>
<h4 id="效果-3"><a href="#效果-3" class="headerlink" title="效果 : "></a><strong>效果 : </strong></h4><p><img src="http://img.blog.csdn.net/20170807115707525?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2V2ZW5fMjAxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2017/08/08/认真学习php面向对象-4/">php学习系列4</a><a class="next" href="/2017/08/04/认真学习php面向对象-2/">php学习系列2</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.xhzyxed.cn"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/memcached/">memcached</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web安全/">web安全</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端构建工具/">前端构建工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/推文/">推文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/项目/">项目</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/13/Linux学习之进程管理/">Linux学习之进程管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/13/Linux学习之服务与进程管理/">Linux学习之服务与进程管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/11/Linux学习之crontab定时任务/">Linux学习之crontab定时任务</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/11/Linux学习之文本编辑器/">Linux学习之文本编辑器</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/10/Nginx优化篇/">Nginx优化篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/php底层原理学习/">php底层原理学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/Linux学习之bash-shell/">Linux学习之bash_shell</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/09/Nginx应用篇/">Nginx应用篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/08/Nginx基础篇/">Nginx基础篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/07/memcached学习笔记/">memcached学习笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://org.xhzyxed.cn/" title="小猴子与小耳朵" target="_blank">小猴子与小耳朵</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">其斤.匕禾页.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>